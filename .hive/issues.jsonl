{"id":"opencode-swarm-monorepo-lf2p4u-mjd4l9i1e89","title":"Remove arbitrary max_subtasks limit of 10","description":"Current max_subtasks is capped at 10 in swarm_decompose and swarm_plan_prompt tools. This is arbitrary and limits complex task decomposition.\n\n## Current State\n- Default: 5 subtasks\n- Max: 10 subtasks (enforced in tool schemas)\n- Core schema (schemas/task.ts) has no max\n\n## Proposed\n- Remove the .max(10) constraints from tool schemas\n- Or raise to something reasonable like 25-50\n- Let the LLM and coordinator decide appropriate granularity\n\n## Files\n- packages/opencode-swarm-plugin/src/swarm-decompose.ts (lines 441, 456, 706)\n- packages/opencode-swarm-plugin/src/swarm-prompts.ts (lines 931, 946)\n- packages/opencode-swarm-plugin/src/eval-capture.ts (line 67)","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-19T17:10:45.337Z","updated_at":"2025-12-19T17:24:30.357Z","closed_at":"2025-12-19T17:24:30.357Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjd5co1086s","title":"Fix Invalid Date error in hive_query - wrong type cast for ISO strings","description":"## Bug\n`hive_query` returns `{\"success\":false,\"error\":{\"code\":\"HiveError\",\"message\":\"Failed to query cells: Invalid Date\"}}`\n\n## Root Cause\nCode in `jsonl.ts` casts ISO date strings as numbers:\n- Line 207-210: `new Date(bead.created_at as number)` \n- Line 347-348: `new Date(cellExport.closed_at)` - closed_at might be undefined\n- Line 465-468: same pattern\n- `merge.ts:135`: `new Date(cell.closed_at)` on potentially undefined\n\nJSONL stores dates as ISO strings like `\"2025-12-19T17:14:05.371Z\"`, not numbers.\n\n## Fix\n1. Remove `as number` casts - Date constructor handles ISO strings fine\n2. Guard against undefined closed_at before passing to Date\n3. Add tests for date parsing edge cases\n\n## TDD Required\nWrite failing test first that reproduces the Invalid Date error, then fix.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-19T17:32:03.876Z","updated_at":"2025-12-19T18:17:45.352Z","closed_at":"2025-12-19T18:17:45.352Z","dependencies":[],"labels":[],"comments":[]}
